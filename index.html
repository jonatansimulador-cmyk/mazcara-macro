<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Deuda Socio</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
            font-size: 12px;
        }

        #mainContent {
            display: block; 
            max-width: 1200px;
            background: white;
            padding: 20px;
            border: 1px solid #ddd;
            margin: 0 auto;
        }

        .dni-input {
            width: 95%;
            padding: 5px;
            border: 2px solid #4a7ebb;
            border-radius: 4px;
            font-weight: bold;
            font-size: 13px;
            background-color: #fffde7;
        }
        
        .dni-input:focus {
            outline: none;
            background-color: #fff;
        }

        #statusMessage {
            font-weight: bold;
            margin-left: 10px;
            font-style: italic;
        }

        .top-section, .bottom-section {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .section-header {
            text-align: center;
            font-weight: bold;
            font-style: italic;
            margin: 20px 0 10px 0;
            font-size: 14px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        th, td {
            border: 1px solid #888;
            padding: 4px 8px;
            text-align: left;
            height: 25px;
        }

        .info-table th {
            background-color: #d9e2f3; 
            font-weight: bold;
            width: 30%;
        }

        .campaign-header-row th {
             background-color: #b4c6e7;
             text-align: center;
             font-style: italic;
        }
        
        .debt-table th {
            background-color: #b4c6e7; 
            text-align: center;
            font-weight: bold;
        }

        .debt-table td {
            text-align: center;
        }

        .debt-table td:first-child {
            background-color: #d9e2f3;
            font-weight: bold;
            text-align: left;
        }

        .text-center { text-align: center !important; }
        
        @media (max-width: 768px) {
            .top-section, .bottom-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

    <div id="mainContent">
        <div class="top-section">
            <div style="flex: 1; min-width: 400px;">
                <table class="info-table">
                    <tr>
                        <th>DNI</th>
                        <td>
                            <input type="text" id="dniInput" class="dni-input" placeholder="Escriba DNI y Enter..." maxlength="8">
                            <span id="statusMessage"></span>
                        </td>
                    </tr>
                    <tr><th>NOMBRE</th><td id="p_nombre" class="text-center"></td></tr>
                    <tr><th>FechaNacimiento</th><td id="p_fechanac" class="text-center"></td></tr>
                    <tr><th>NUMTEL</th><td id="p_numtel" class="text-center"></td></tr>
                    <tr><th>DIRECCION</th><td id="p_direccion" class="text-center"></td></tr>
                    <tr><th>DISTRITO</th><td id="p_distrito" class="text-center"></td></tr>
                    <tr><th>CORREO</th><td id="p_correo" class="text-center"></td></tr>
                    <tr><th>MORA_SOCIO</th><td id="p_mora" class="text-center"></td></tr>
                    <tr><th>NOMBRE_PRODUCTO</th><td id="p_producto" class="text-center"></td></tr>
                </table>
            </div>

            <div style="flex: 1; min-width: 300px;">
                <table class="info-table">
                    <tr class="campaign-header-row"><th colspan="2">Información Campaña</th></tr>
                    <tr><th>TipoCampaña</th><td id="c_tipo" class="text-center"></td></tr>
                    <tr><th>Accion_Cobranzas</th><td id="c_accion_cob" class="text-center"></td></tr>
                    <tr><th>AcciónTarjeta</th><td id="c_accion_tar" class="text-center"></td></tr>
                    <tr><th>Tasa_TC_PCT</th><td id="c_tasa_tc" class="text-center"></td></tr>
                    <tr><th>Tasa_Campaña_TC</th><td id="c_tasa_camp_tc" class="text-center"></td></tr>
                    <tr><th>Tasa_PPD</th><td id="c_tasa_ppd" class="text-center"></td></tr>
                    <tr><th>Tasa_Campaña_PPD</th><td id="c_tasa_camp_ppd" class="text-center"></td></tr>
                    <tr><th>PlazoMaximo_PPD</th><td id="c_plazo_max" class="text-center"></td></tr>
                    <tr><th>GIFT</th><td id="c_gift" class="text-center"></td></tr>
                    <tr><th>PlazoMinimoOfrecer</th><td id="c_plazo_min" class="text-center"></td></tr>
                </table>
            </div>
        </div>

        <div class="section-header">Información Deuda Socio</div>

        <div class="bottom-section">
            <div style="flex: 1; min-width: 450px;">
                <table class="debt-table">
                    <thead>
                        <tr>
                            <th>TARJETA</th>
                            <th>SOLES</th>
                            <th>DÓLARES</th>
                        </tr>
                    </thead>
                    <tbody id="cardDebtBody">
                        <tr><td colspan="3">Ingrese DNI arriba para cargar datos</td></tr>
                    </tbody>
                </table>
            </div>

            <div style="flex: 1.2; min-width: 500px;">
                <table class="debt-table">
                    <thead>
                        <tr>
                            <th>PRÉSTAMO</th>
                            <th>PPD</th>
                            <th>PPD CAPITAL</th>
                            <th>PPI</th>
                        </tr>
                    </thead>
                    <tbody id="loanDebtBody">
                         <tr><td colspan="4">Ingrese DNI arriba para cargar datos</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


<script>
    const clientesDB = {
        // ========================================================================
        // CASO 1: TARJETA SOLA (Sin PPD/PPI). 
        // REGLA: 0 Mora = 0 Interés Mora. 
        // REGLA: Saldo_Total_Mora (0) < Factu_Min (250)
        // ========================================================================
        "44631847": {
            personal: {
                 nombre: "Anderh Yuver Garcia Bravo", fechanac: "19871115", numtel: "914493014",
                direccion: "CAL. LOS JAZMINES 105", distrito: "Reque", correo: "ANDERH_20@HOTMAIL.COM",
                mora: "0 dias", producto: "MILES" // 0 DIAS MORA
            },
            campana: {
                tipo: "Preventiva", accionCob: "Recordatorio", accionTar: "Activa",
                tasaTC: "0", tasaCampTC: "0", tasaPPD: "0", tasaCampPPD: "0", 
                plazoMax: "0", gift: "Puntos Dobles", plazoMin: "0"
            },
            deuda: {
                rows: ["FechaFacturacion", "FechaVencimiento", "Factu_Min", "Factu_Mes", "Mora_Producto", "Saldo_Total", "Capital_Total", "Interes_Total", "Comision_Total", "Saldo_Total_Mora", "Capital_Mora", "Interes_Mora", "Comision_Mora", "Interes_Acumulado"],
                // TARJETA: TIENE DEUDA PERO ESTÁ AL DÍA (0 MORA)
                tarjetaSoles: ["20251125", "20251214", "S/ 250.00", "S/ 1,500.00", "0", "S/ 1,500.00", "S/ 1,500.00", "S/ 0.00", "S/ 0.00", "S/ 0.00", "S/ 0.00", "S/ 0.00", "S/ 0.00", "S/ 0.00"],
                tarjetaDolares: ["20251125", "20251214", "$ 10.00", "$ 150.00", "0", "$ 150.00", "$ 150.00", "$ 0.00", "$ 0.00", "$ 0.00", "$ 0.00", "$ 0.00", "$ 0.00", "$ 0.00"],
                // PPD/PPI VACIOS
                ppd: Array(14).fill("S/ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v),
                ppdCapital: Array(14).fill("S/ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v),
                ppi: Array(14).fill("S/ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v)
            }
        },

        // ========================================================================
        // CASO 2: TARJETA + PPD (Sin PPI).
        // REGLA: Tiene Mora (>0) = Tiene Interés Mora.
        // REGLA: Saldo_Total_Mora (800) < Factu_Min (1000) en Tarjeta.
        // REGLA: Saldo_Total_Mora (200) < Factu_Min (250) en PPD.
        // ========================================================================
        "12345678": {
            personal: {
                 nombre: "Juan Perez Sanchez", fechanac: "19900520", numtel: "999888777",
                direccion: "AV. LARCO 123", distrito: "Miraflores", correo: "juan.perez@email.com",
                mora: "45 dias", producto: "EFECTIVO"
            },
            campana: {
                tipo: "Compra Deuda", accionCob: "Extrajudicial", accionTar: "Mantener",
                tasaTC: "15", tasaCampTC: "0", tasaPPD: "12", tasaCampPPD: "10",
                plazoMax: "48", gift: "Descuento 10%", plazoMin: "12"
            },
            deuda: {
                 rows: ["FechaFacturacion", "FechaVencimiento", "Factu_Min", "Factu_Mes", "Mora_Producto", "Saldo_Total", "Capital_Total", "Interes_Total", "Comision_Total", "Saldo_Total_Mora", "Capital_Mora", "Interes_Mora", "Comision_Mora", "Interes_Acumulado"],
                // TARJETA: CON DEUDA Y CON MORA
                tarjetaSoles: ["20251125", "20251214", "S/ 1,000.00", "S/ 5,000.00", "45", "S/ 5,000.00", "S/ 4,000.00", "S/ 500.00", "S/ 500.00", "S/ 800.00", "S/ 600.00", "S/ 150.00", "S/ 50.00", "S/ 100.00"],
                tarjetaDolares: Array(14).fill("$ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v),
                // PPD: CON DEUDA. Saldo Mora (200) < Factu Min (250)
                ppd: ["20251125", "20251214", "S/ 250.00", "S/ 2,000.00", "45", "S/ 2,000.00", "S/ 1,500.00", "S/ 500.00", "S/ 0.00", "S/ 200.00", "S/ 150.00", "S/ 50.00", "S/ 0.00", "S/ 20.00"],
                ppdCapital: ["20251125", "20251214", "S/ 250.00", "S/ 2,000.00", "45", "S/ 2,000.00", "S/ 2,000.00", "S/ 0.00", "S/ 0.00", "S/ 200.00", "S/ 200.00", "S/ 0.00", "S/ 0.00", "S/ 0.00"],
                // PPI VACIO
                ppi: Array(14).fill("S/ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v)
            }
        },

        // ========================================================================
        // CASO 3: TARJETA + PPI (Sin PPD).
        // REGLA: Tiene Mora (>0) = Tiene Interés Mora.
        // REGLA: Saldo_Total_Mora (3000) < Factu_Min (3500) en Tarjeta.
        // REGLA: Saldo_Total_Mora (1200) < Factu_Min (1500) en PPI.
        // ========================================================================
        "87654321": {
            personal: {
                 nombre: "Maria Lopez Ramos", fechanac: "19850110", numtel: "987654321",
                direccion: "JR. UNION 555", distrito: "Lima", correo: "mlopez@email.com",
                mora: "90 dias", producto: "HIPOTECARIO"
            },
            campana: {
                tipo: "Judicial", accionCob: "Judicial", accionTar: "Bloqueo",
                tasaTC: "0", tasaCampTC: "0", tasaPPD: "0", tasaCampPPD: "0",
                plazoMax: "0", gift: "Ninguno", plazoMin: "0"
            },
            deuda: {
                 rows: ["FechaFacturacion", "FechaVencimiento", "Factu_Min", "Factu_Mes", "Mora_Producto", "Saldo_Total", "Capital_Total", "Interes_Total", "Comision_Total", "Saldo_Total_Mora", "Capital_Mora", "Interes_Mora", "Comision_Mora", "Interes_Acumulado"],
                // TARJETA: CON DEUDA Y CON MORA
                tarjetaSoles: ["20251125", "20251214", "S/ 3,500.00", "S/ 12,000.00", "90", "S/ 12,000.00", "S/ 10,000.00", "S/ 1,500.00", "S/ 500.00", "S/ 3,000.00", "S/ 2,500.00", "S/ 400.00", "S/ 100.00", "S/ 350.00"],
                tarjetaDolares: Array(14).fill("$ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v),
                // PPD VACIO
                ppd: Array(14).fill("S/ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v),
                ppdCapital: Array(14).fill("S/ 0.00").map((v, i) => i < 2 ? "0" : i === 4 ? "0" : v),
                // PPI: CON DEUDA. Saldo Mora (1200) < Factu Min (1500)
                ppi: ["20251125", "20251214", "S/ 1,500.00", "S/ 85,000.00", "90", "S/ 85,000.00", "S/ 70,000.00", "S/ 14,000.00", "S/ 1,000.00", "S/ 1,200.00", "S/ 800.00", "S/ 300.00", "S/ 100.00", "S/ 450.00"],
            }
        }
    };

    function buscarCliente() {
        const dniInput = document.getElementById('dniInput');
        const dniValue = dniInput.value.trim();
        const msg = document.getElementById('statusMessage');

        if (dniValue === "") {
             limpiarCampos();
             msg.innerText = "";
             return;
        }

        if (clientesDB[dniValue]) {
            const cliente = clientesDB[dniValue];
            msg.style.color = "green";
            msg.innerText = "✓ Cliente cargado";
            
            llenarDatosPersonales(cliente.personal);
            llenarDatosCampana(cliente.campana);
            llenarTablasDeuda(cliente.deuda);

        } else {
            msg.style.color = "red";
            msg.innerText = "✗ DNI no encontrado";
            limpiarCampos();
        }
    }

    function limpiarCampos() {
        ['p_nombre', 'p_fechanac', 'p_numtel', 'p_direccion', 'p_distrito', 'p_correo', 'p_mora', 'p_producto',
         'c_tipo', 'c_accion_cob', 'c_accion_tar', 'c_tasa_tc', 'c_tasa_camp_tc', 'c_tasa_ppd', 'c_tasa_camp_ppd', 'c_plazo_max', 'c_gift', 'c_plazo_min'
        ].forEach(id => document.getElementById(id).innerText = "");

        document.getElementById('cardDebtBody').innerHTML = '<tr><td colspan="3">Datos no disponibles</td></tr>';
        document.getElementById('loanDebtBody').innerHTML = '<tr><td colspan="4">Datos no disponibles</td></tr>';
    }

    function llenarDatosPersonales(data) {
        document.getElementById('p_nombre').innerText = data.nombre;
        document.getElementById('p_fechanac').innerText = data.fechanac;
        document.getElementById('p_numtel').innerText = data.numtel;
        document.getElementById('p_direccion').innerText = data.direccion;
        document.getElementById('p_distrito').innerText = data.distrito;
        document.getElementById('p_correo').innerText = data.correo;
        document.getElementById('p_mora').innerText = data.mora;
        document.getElementById('p_producto').innerText = data.producto;
    }

    function llenarDatosCampana(data) {
        document.getElementById('c_tipo').innerText = data.tipo;
        document.getElementById('c_accion_cob').innerText = data.accionCob;
        document.getElementById('c_accion_tar').innerText = data.accionTar;
        document.getElementById('c_tasa_tc').innerText = data.tasaTC;
        document.getElementById('c_tasa_camp_tc').innerText = data.tasaCampTC;
        document.getElementById('c_tasa_ppd').innerText = data.tasaPPD;
        document.getElementById('c_tasa_camp_ppd').innerText = data.tasaCampPPD;
        document.getElementById('c_plazo_max').innerText = data.plazoMax;
        document.getElementById('c_gift').innerText = data.gift;
        document.getElementById('c_plazo_min').innerText = data.plazoMin;
    }

    function llenarTablasDeuda(data) {
        const cardBody = document.getElementById('cardDebtBody');
        const loanBody = document.getElementById('loanDebtBody');
        
        cardBody.innerHTML = '';
        loanBody.innerHTML = '';

        for (let i = 0; i < data.rows.length; i++) {
            const rowLabel = data.rows[i];
            
            let trCard = document.createElement('tr');
            trCard.innerHTML = `<td>${rowLabel.replace(/_/g, ' ')}</td>
                                <td>${data.tarjetaSoles[i]}</td>
                                <td>${data.tarjetaDolares[i]}</td>`;
            cardBody.appendChild(trCard);

            let trLoan = document.createElement('tr');
            trLoan.innerHTML = `<td>${rowLabel.replace(/_/g, ' ')}</td>
                                <td>${data.ppd[i]}</td>
                                <td>${data.ppdCapital[i]}</td>
                                <td>${data.ppi[i]}</td>`;
            loanBody.appendChild(trLoan);
        }
    }

    document.getElementById('dniInput').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            buscarCliente();
        }
    });

</script>

</body>
</html>
